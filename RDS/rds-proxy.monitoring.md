# Monitoring RDS Proxy metrics with Amazon CloudWatch<a name="rds-proxy.monitoring"></a>

 You can monitor RDS Proxy by using Amazon CloudWatch\. CloudWatch collects and processes raw data from the proxies into readable, near\-real\-time metrics\. To find these metrics in the CloudWatch console, choose **Metrics**, then choose **RDS**, and choose **Per\-Proxy Metrics**\. For more information, see [Using Amazon CloudWatch metrics](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/working_with_metrics.html) in the Amazon CloudWatch User Guide\. 

**Note**  
 RDS publishes these metrics for each underlying Amazon EC2 instance associated with a proxy\. A single proxy might be served by more than one EC2 instance\. Use CloudWatch statistics to aggregate the values for a proxy across all the associated instances\.   
 Some of these metrics might not be visible until after the first successful connection by a proxy\. 

 In the RDS Proxy logs, each entry is prefixed with the name of the associated proxy endpoint\. This name can be the name you specified for a user\-defined endpoint, or the special name `default` for read/write requests using the default endpoint of a proxy\. 

 All RDS Proxy metrics are in the group `proxy`\. 

 Each proxy endpoint has its own CloudWatch metrics\. You can monitor the usage of each proxy endpoint independently\. For more information about proxy endpoints, see [Working with Amazon RDS Proxy endpoints](rds-proxy-endpoints.md)\. 

 You can aggregate the values for each metric using one of the following dimension sets\. For example, by using the `ProxyName` dimension set, you can analyze all the traffic for a particular proxy\. By using the other dimension sets, you can split the metrics in different ways\. You can split the metrics based on the different endpoints or target databases of each proxy, or the read/write and read\-only traffic to each database\. 
+   Dimension set 1: `ProxyName` 
+   Dimension set 2: `ProxyName`, `EndpointName` 
+   Dimension set 3: `ProxyName`, `TargetGroup`, `Target` 
+   Dimension set 4: `ProxyName`, `TargetGroup`, `TargetRole` 


|  Metric  |  Description  |  Valid period  |  CloudWatch dimension set  | 
| --- | --- | --- | --- | 
|   `AvailabilityPercentage`   |   The percentage of time for which the target group was available in the role indicated by the dimension\. This metric is reported every minute\. The most useful statistic for this metric is `Average`\.   |  1 minute  |  [Dimension set 4](#proxy-dimension-set-4)  | 
|  ClientConnections  |   The current number of client connections\. This metric is reported every minute\. The most useful statistic for this metric is `Sum`\.   |   1 minute   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  ClientConnectionsClosed  |   The number of client connections closed\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|   `ClientConnectionsNoTLS`   |  The current number of client connections without Transport Layer Security \(TLS\)\. This metric is reported every minute\. The most useful statistic for this metric is Sum\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|   `ClientConnectionsReceived`   |   The number of client connection requests received\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  ClientConnectionsSetupFailedAuth  |   The number of client connection attempts that failed due to misconfigured authentication or TLS\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  ClientConnectionsSetupSucceeded  |   The number of client connections successfully established with any authentication mechanism with or without TLS\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  ClientConnectionsTLS  |  The current number of client connections with TLS\. This metric is reported every minute\. The most useful statistic for this metric is Sum\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  DatabaseConnectionRequests  |   The number of requests to create a database connection\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|   `DatabaseConnectionRequestsWithTLS`   |  The number of requests to create a database connection with TLS\. The most useful statistic for this metric is Sum\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|  DatabaseConnections  |   The current number of database connections\. This metric is reported every minute\. The most useful statistic for this metric is `Sum`\.   |   1 minute   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|   `DatabaseConnectionsBorrowLatency`   |  The time in microseconds that it takes for the proxy being monitored to get a database connection\. The most useful statistic for this metric is Average\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  DatabaseConnectionsCurrentlyBorrowed  |   The current number of database connections in the borrow state\. This metric is reported every minute\. The most useful statistic for this metric is `Sum`\.   |   1 minute   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|  DatabaseConnectionsCurrentlyInTransaction  |   The current number of database connections in a transaction\. This metric is reported every minute\. The most useful statistic for this metric is `Sum`\.   |   1 minute   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|  DatabaseConnectionsCurrentlySessionPinned  |   The current number of database connections currently pinned because of operations in client requests that change session state\. This metric is reported every minute\. The most useful statistic for this metric is `Sum`\.   |   1 minute   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|  DatabaseConnectionsSetupFailed  |   The number of database connection requests that failed\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|  DatabaseConnectionsSetupSucceeded  |   The number of database connections successfully established with or without TLS\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|   `DatabaseConnectionsWithTLS`   |  The current number of database connections with TLS\. This metric is reported every minute\. The most useful statistic for this metric is Sum\.  |  1 minute  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|  MaxDatabaseConnectionsAllowed  |   The maximum number of database connections allowed\. This metric is reported every minute\. The most useful statistic for this metric is `Sum`\.   |   1 minute   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|   `QueryDatabaseResponseLatency`   |  The time in microseconds that the database took to respond to the query\. The most useful statistic for this metric is Average\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2), [Dimension set 3](#proxy-dimension-set-3), [Dimension set 4](#proxy-dimension-set-4)  | 
|  QueryRequests  |   The number of queries received\. A query including multiple statements is counted as one query\. The most useful statistic for this metric is `Sum`\.   |   1 minute and above   |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  QueryRequestsNoTLS  |  The number of queries received from non\-TLS connections\. A query including multiple statements is counted as one query\. The most useful statistic for this metric is Sum\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|   `QueryRequestsTLS`   |  The number of queries received from TLS connections\. A query including multiple statements is counted as one query\. The most useful statistic for this metric is Sum\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 
|  QueryResponseLatency  |  The time in microseconds between getting a query request and the proxy responding to it\. The most useful statistic for this metric is Average\.  |  1 minute and above  |  [Dimension set 1](#proxy-dimension-set-1), [Dimension set 2](#proxy-dimension-set-2)  | 

 You can find logs of RDS Proxy activity under CloudWatch in the AWS Management Console\. Each proxy has an entry in the **Log groups** page\. 

**Important**  
 These logs are intended for human consumption for troubleshooting purposes and not for programmatic access\. The format and content of the logs is subject to change\.   
 In particular, older logs don't contain any prefixes indicating the endpoint for each request\. In newer logs, each entry is prefixed with the name of the associated proxy endpoint\. This name can be the name that you specified for a user\-defined endpoint, or the special name `default` for requests using the default endpoint of a proxy\. 